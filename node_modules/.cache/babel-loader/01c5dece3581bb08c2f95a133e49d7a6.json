{"ast":null,"code":"import _objectSpread from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import HomeLayout from'../../UI_Components/HomeLayout/HomeLayout';import axios from'axios';import{connect}from'react-redux';import Input from'../../components/Input/Input';import Button from'../../components/Button/Button';import Spinner from'../../UI_Components/Spinner/Spinner';import styles from'./profileUpdate.module.css';import*as actionTypes from'../../store/action';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileUpdate=/*#__PURE__*/function(_Component){_inherits(ProfileUpdate,_Component);var _super=_createSuper(ProfileUpdate);function ProfileUpdate(){var _this;_classCallCheck(this,ProfileUpdate);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userForm:{name:{elementType:'input',elementConfig:{type:'text',placeholder:'Your Name'},value:_this.props.user.name,validation:{required:true,validName:true},valid:false,touched:false},password:{elementType:'input',elementConfig:{type:'password',placeholder:'Password'},value:_this.props.user.name,validation:{required:true,minLength:6},valid:false,touched:false},address:{elementType:'input',elementConfig:{type:'text',placeholder:'Address'},value:_this.props.user.address,validation:{required:true},valid:false,touched:false},street:{elementType:'input',elementConfig:{type:'text',placeholder:'Street'},value:_this.props.user.street,validation:{required:true},valid:false,touched:false},zipCode:{elementType:'input',elementConfig:{type:'text',placeholder:'ZIP Code'},value:_this.props.user.zipCode,validation:{required:true,minLength:6,maxLength:6,isNumeric:true},valid:false,touched:false},country:{elementType:'input',elementConfig:{type:'text',placeholder:'country'},value:_this.props.user.country,validation:{required:true},valid:false,touched:false},email:{elementType:'input',elementConfig:{type:'email',placeholder:'Your E-Mail'},value:_this.props.user.email,validation:{required:true,isEmail:true},valid:false,touched:false},gender:{elementType:'select',elementConfig:{options:[{value:'',displayValue:'Please select gender'},{value:'male',displayValue:'male'},{value:'female',displayValue:'female'}]},value:_this.props.user.gender,validation:{required:true},valid:true},maritalstatus:{elementType:'select',elementConfig:{options:[{value:'',displayValue:'Please select  marital status'},{value:'married',displayValue:'married'},{value:'divorced',displayValue:'divorced'},{value:'single',displayValue:'single'}]},value:_this.props.user.maritalstatus,validation:{required:true},valid:true},phonenumber:{elementType:'input',elementConfig:{type:'text',placeholder:'phonenumber'},value:_this.props.user.phonenumber,validation:{required:true,minLength:10,maxLength:10},valid:false,touched:false},dateofbirth:{elementType:'input',elementConfig:{label:'DOB',type:'date',placeholder:''},value:_this.props.user.dateofbirth,validation:{required:true,ageCheck:true},valid:false,touched:false},idtype:{elementType:'select',elementConfig:{options:[{value:'',displayValue:'Please select  ID  Type'},{value:'passport',displayValue:'passport'},{value:'driving',displayValue:'driving license'},{value:'ID card',displayValue:'ID card'}]},value:_this.props.user.idtype,validation:{required:true},valid:true},idnumber:{elementType:'input',elementConfig:{type:'text',placeholder:'ID Number'},value:_this.props.user.idnumber,validation:{required:true},valid:false,touched:false}},formIsValid:false,loading:false};_this.userHandler=function(event){event.preventDefault();_this.setState({loading:true});var formData={};for(var formElementIdentifier in _this.state.userForm){console.log(formElementIdentifier);formData[formElementIdentifier]=_this.state.userForm[formElementIdentifier].value;}formData[\"username\"]=_this.props.user.username;formData[\"registrationDate\"]=_this.props.user.registrationDate;axios.put('http://localhost:3000/users',formData).then(function(response){_this.setState({loading:false});_this.props.onUpdateAction(formData);_this.props.history.push('/');}).catch(function(error){_this.setState({loading:false});});};_this.inputChangedHandler=function(event,inputIdentifier){var updatedUserForm=_objectSpread({},_this.state.userForm);var updatedFormElement=_objectSpread({},updatedUserForm[inputIdentifier]);updatedFormElement.value=event.target.value;updatedFormElement.valid=_this.checkValidity(updatedFormElement.value,updatedFormElement.validation);updatedFormElement.touched=true;updatedUserForm[inputIdentifier]=updatedFormElement;var formIsValid=true;for(var _inputIdentifier in updatedUserForm){formIsValid=updatedUserForm[_inputIdentifier].valid&&formIsValid;}_this.setState({userForm:updatedUserForm,formIsValid:formIsValid});};return _this;}_createClass(ProfileUpdate,[{key:\"checkValidity\",value:function checkValidity(value,rules){var isValid=true;if(!rules){return true;}if(rules.required){isValid=value.trim()!==''&&isValid;}if(rules.minLength){isValid=value.length>=rules.minLength&&isValid;}if(rules.maxLength){isValid=value.length<=rules.maxLength&&isValid;}if(rules.isEmail){var pattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;isValid=pattern.test(value)&&isValid;}if(rules.validName){var _pattern=/^[a-zA-Z ]*$/;isValid=_pattern.test(value)&&isValid;}if(rules.isNumeric){var _pattern2=/^\\d+$/;isValid=_pattern2.test(value)&&isValid;}if(rules.ageCheck){console.log(\".............\"+value);}return isValid;}},{key:\"render\",value:function render(){var _this2=this;var formElementsArray=[];for(var key in this.state.userForm){formElementsArray.push({id:key,config:this.state.userForm[key]});}var form=/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.userHandler,children:[formElementsArray.map(function(formElement){return/*#__PURE__*/_jsx(Input,{elementType:formElement.config.elementType,elementConfig:formElement.config.elementConfig,value:formElement.config.value,invalid:!formElement.config.valid,shouldValidate:formElement.config.validation,touched:formElement.config.touched,changed:function changed(event){return _this2.inputChangedHandler(event,formElement.id);}},formElement.id);}),/*#__PURE__*/_jsx(Button,{btnType:\"Success\",children:\"UPDATE\"})]});if(this.state.loading){form=/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.ProfileUpdate,children:[/*#__PURE__*/_jsx(HomeLayout,{}),/*#__PURE__*/_jsx(\"h4\",{children:\"UPDATE PROFILE DATA\"}),form]});}}]);return ProfileUpdate;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.formData};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onUpdateAction:function onUpdateAction(formData){return dispatch({type:actionTypes.PROFILE_UPDATE_ACTION,formData:formData});}};};export default connect(mapStateToProps,mapDispatchToProps)(ProfileUpdate);","map":{"version":3,"sources":["/Users/venith/Desktop/FF_Assignment/policymanagement/src/components/ProfileUpdate/ProfileUpdate.js"],"names":["React","Component","HomeLayout","axios","connect","Input","Button","Spinner","styles","actionTypes","ProfileUpdate","state","userForm","name","elementType","elementConfig","type","placeholder","value","props","user","validation","required","validName","valid","touched","password","minLength","address","street","zipCode","maxLength","isNumeric","country","email","isEmail","gender","options","displayValue","maritalstatus","phonenumber","dateofbirth","label","ageCheck","idtype","idnumber","formIsValid","loading","userHandler","event","preventDefault","setState","formData","formElementIdentifier","console","log","username","registrationDate","put","then","response","onUpdateAction","history","push","catch","error","inputChangedHandler","inputIdentifier","updatedUserForm","updatedFormElement","target","checkValidity","rules","isValid","trim","length","pattern","test","formElementsArray","key","id","config","form","map","formElement","mapStateToProps","mapDispatchToProps","dispatch","PROFILE_UPDATE_ACTION"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport HomeLayout from '../../UI_Components/HomeLayout/HomeLayout';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport Input from '../../components/Input/Input';\nimport Button from '../../components/Button/Button';\nimport Spinner from '../../UI_Components/Spinner/Spinner';\nimport styles from './profileUpdate.module.css';\nimport * as actionTypes from '../../store/action';\n\n\n\nclass ProfileUpdate extends Component {\n\n  state = {\n    userForm: {\n        name: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'Your Name'\n            },\n            value: this.props.user.name,\n            validation: {\n                required: true,\n                validName:true\n            },\n            valid: false,\n            touched: false\n        },\n        password: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'password',\n                placeholder: 'Password'\n            },\n            value: this.props.user.name,\n            validation: {\n                required: true,\n                minLength: 6\n                \n            },\n            valid: false,\n            touched: false\n        },\n        address: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'Address'\n            },\n            value: this.props.user.address,\n            validation: {\n                required: true\n            },\n            valid: false,\n            touched: false\n        },\n        street: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'Street'\n            },\n            value: this.props.user.street,\n            validation: {\n                required: true\n            },\n            valid: false,\n            touched: false\n        },\n        zipCode: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'ZIP Code'\n            },\n            value:this.props.user.zipCode,\n            validation: {\n                required: true,\n                minLength: 6,\n                maxLength: 6,\n                isNumeric: true\n            },\n            valid: false,\n            touched: false\n        },\n        country: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'country'\n            },\n            value:this.props.user.country,\n            validation: {\n                required: true\n            },\n            valid: false,\n            touched: false\n        },\n        email: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'email',\n                placeholder: 'Your E-Mail'\n            },\n            value:this.props.user.email,\n            validation: {\n                required: true,\n                isEmail: true\n            },\n            valid: false,\n            touched: false\n        },\n        gender: {\n            elementType: 'select',\n            elementConfig: {\n                options: [\n                    {value: '', displayValue: 'Please select gender'},\n                    {value: 'male', displayValue: 'male'},\n                    {value: 'female', displayValue: 'female'}\n                ]\n            },\n            value: this.props.user.gender,\n            validation: {required: true},\n            valid: true\n        },\n        maritalstatus: {\n            elementType: 'select',\n            elementConfig: {\n                options: [\n                    {value: '', displayValue: 'Please select  marital status'},\n                    {value: 'married', displayValue: 'married'},\n                    {value: 'divorced', displayValue: 'divorced'},\n                    {value: 'single', displayValue: 'single'}\n                ]\n            },\n            value: this.props.user.maritalstatus,\n            validation: {required: true},\n            valid: true\n        },\n        phonenumber: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'phonenumber'\n            },\n            value: this.props.user.phonenumber,\n            validation: {\n                required: true,\n                minLength: 10,\n                maxLength: 10,\n            },\n            valid: false,\n            touched: false\n        },\n        dateofbirth: {\n            elementType: 'input',\n            elementConfig: {\n                label : 'DOB',\n                type: 'date',\n                placeholder: ''\n            },\n            value:this.props.user.dateofbirth,\n            validation: {\n                required :true,\n                ageCheck:true\n            },\n            valid: false,\n            touched: false\n        },\n        idtype: {\n            elementType: 'select',\n            elementConfig: {\n                options: [\n                    {value: '', displayValue: 'Please select  ID  Type'},\n                    {value: 'passport', displayValue: 'passport'},\n                    {value: 'driving', displayValue: 'driving license'},\n                    {value: 'ID card', displayValue: 'ID card'}\n                ]\n            },\n            value: this.props.user.idtype,\n            validation: {required: true},\n            valid: true\n        },\n        idnumber: {\n            elementType: 'input',\n            elementConfig: {\n                type: 'text',\n                placeholder: 'ID Number'\n            },\n            value: this.props.user.idnumber,\n            validation: {\n                required: true\n            },\n            valid: false,\n            touched: false\n        },\n    },\n    formIsValid: false,\n    loading: false\n}\n\n\nuserHandler = ( event ) => {\n  event.preventDefault();\n  this.setState( { loading: true } );\n  const formData = {};\n  for (let formElementIdentifier in this.state.userForm) {\n      console.log(formElementIdentifier);\n      formData[formElementIdentifier] = this.state.userForm[formElementIdentifier].value;\n  }\n  formData[\"username\"]=this.props.user.username;\n  formData[\"registrationDate\"]=this.props.user.registrationDate;\n  \n   \n  axios.put( 'http://localhost:3000/users', formData )\n    .then( response => {\n        this.setState( { loading: false } );\n        this.props.onUpdateAction(formData);\n       this.props.history.push( '/' );\n     } )\n   .catch( error => {\n         this.setState( { loading: false } );\n    } );\n}\n\ncheckValidity(value, rules) {\n  let isValid = true;\n  if (!rules) {\n      return true;\n  }\n  \n  if (rules.required) {\n      isValid = value.trim() !== '' && isValid;\n  }\n\n  if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid\n  }\n\n  if (rules.maxLength) {\n      isValid = value.length <= rules.maxLength && isValid\n  }\n\n  if (rules.isEmail) {\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n      isValid = pattern.test(value) && isValid\n  }\n  if(rules.validName){\n      const pattern = /^[a-zA-Z ]*$/;\n      isValid = pattern.test(value) && isValid\n  }\n\n  if (rules.isNumeric) {\n      const pattern = /^\\d+$/;\n      isValid = pattern.test(value) && isValid\n  }\n  if(rules.ageCheck){\n      console.log(\".............\"+value);\n\n  }\n  return isValid;\n}\n\n\n\ninputChangedHandler = (event, inputIdentifier) => {\n  const updatedUserForm = {\n      ...this.state.userForm\n  };\n  const updatedFormElement = { \n      ...updatedUserForm[inputIdentifier]\n  };\n  updatedFormElement.value = event.target.value;\n  updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);\n  updatedFormElement.touched = true;\n  updatedUserForm[inputIdentifier] = updatedFormElement;\n  \n  let formIsValid = true;\n  for (let inputIdentifier in updatedUserForm) {\n      formIsValid = updatedUserForm[inputIdentifier].valid && formIsValid;\n  }\n  this.setState({userForm: updatedUserForm, formIsValid: formIsValid});\n}\n\nrender () {\n  const formElementsArray = [];\n  for (let key in this.state.userForm) {\n      formElementsArray.push({\n          id: key,\n          config: this.state.userForm[key]\n      });\n  }\n  let form = (\n      <form onSubmit={this.userHandler}>\n          {formElementsArray.map(formElement => (\n              <Input \n                  key={formElement.id}\n                  elementType={formElement.config.elementType}\n                  elementConfig={formElement.config.elementConfig}\n                  value={formElement.config.value}\n                  invalid={!formElement.config.valid}\n                  shouldValidate={formElement.config.validation}\n                  touched={formElement.config.touched}\n                  changed={(event) => this.inputChangedHandler(event, formElement.id)} />\n          ))}\n          <Button btnType=\"Success\" >UPDATE</Button>\n      </form>\n  );\n  if ( this.state.loading ) {\n      form = <Spinner />;\n  }\n  return (\n      <div className={styles.ProfileUpdate}>\n        <HomeLayout/>\n          <h4>UPDATE PROFILE DATA</h4>\n          {form}\n      </div>\n  );\n}\n}\n\n\nconst mapStateToProps = state => {\n  return {\n      user: state.formData\n  };\n};\n\nconst mapDispatchToProps = dispatch =>{\n\n  return{\n      onUpdateAction : (formData) => dispatch({type:actionTypes.PROFILE_UPDATE_ACTION,formData:formData})\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileUpdate);"]},"metadata":{},"sourceType":"module"}