{"ast":null,"code":"import _objectSpread from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import Button from'../../components/Button/Button';import Spinner from'../../UI_Components/Spinner/Spinner';import styles from'./registration.module.css';//import axios from '../../../axios-orders';\nimport Input from'../../components/Input/Input';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Registration=/*#__PURE__*/function(_Component){_inherits(Registration,_Component);var _super=_createSuper(Registration);function Registration(){var _this;_classCallCheck(this,Registration);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userForm:{name:{elementType:'input',elementConfig:{type:'text',placeholder:'Your Name'},value:'',validation:{required:true,validName:true},valid:false,touched:false},username:{elementType:'input',elementConfig:{type:'text',placeholder:'Your User Name'},value:'',validation:{required:true},valid:false,touched:false},password:{elementType:'input',elementConfig:{type:'password',placeholder:'Password'},value:'',validation:{required:true,minLength:6},valid:false,touched:false},address:{elementType:'input',elementConfig:{type:'text',placeholder:'Address'},value:'',validation:{required:true},valid:false,touched:false},street:{elementType:'input',elementConfig:{type:'text',placeholder:'Street'},value:'',validation:{required:true},valid:false,touched:false},zipCode:{elementType:'input',elementConfig:{type:'text',placeholder:'ZIP Code'},value:'',validation:{required:true,minLength:6,maxLength:6,isNumeric:true},valid:false,touched:false},country:{elementType:'input',elementConfig:{type:'text',placeholder:'Country'},value:'',validation:{required:true},valid:false,touched:false},email:{elementType:'input',elementConfig:{type:'email',placeholder:'Your E-Mail'},value:'',validation:{required:true,isEmail:true},valid:false,touched:false},gender:{elementType:'select',elementConfig:{options:[{value:'',displayValue:'Please select gender'},{value:'male',displayValue:'male'},{value:'female',displayValue:'female'}]},value:'',validation:{required:true},valid:true},maritalstatus:{elementType:'select',elementConfig:{options:[{value:'',displayValue:'Please select  marital status'},{value:'married',displayValue:'married'},{value:'divorced',displayValue:'divorced'},{value:'single',displayValue:'single'}]},value:'',validation:{required:true},valid:true},phonenumber:{elementType:'input',elementConfig:{type:'text',placeholder:'phonenumber'},value:'',validation:{required:true,minLength:10,maxLength:10},valid:false,touched:false},dateofbirth:{elementType:'input',elementConfig:{label:'DOB',type:'date',placeholder:'phonenumber'},value:'',validation:{required:true,ageCheck:true},valid:false,touched:false},registrationDate:{elementType:'input',elementConfig:{type:'date',placeholder:'registration date'},value:'',validation:{required:true},valid:false,touched:false},idtype:{elementType:'select',elementConfig:{options:[{value:'',displayValue:'Please select  ID  Type'},{value:'passport',displayValue:'passport'},{value:'driving',displayValue:'driving license'},{value:'ID card',displayValue:'ID card'}]},value:'',validation:{required:true},valid:true},idnumber:{elementType:'input',elementConfig:{type:'text',placeholder:'ID Number'},value:'',validation:{required:true},valid:false,touched:false}},formIsValid:false,loading:false};_this.userHandler=function(event){event.preventDefault();_this.setState({loading:true});var formData={};for(var formElementIdentifier in _this.state.userForm){console.log(formElementIdentifier);formData[formElementIdentifier]=_this.state.userForm[formElementIdentifier].value;}formData[\"id\"]='R-'+Math.floor(Math.random()*(999-100+1)+100);console.log(\" the generated user id\"+formData.id);var user={userData:formData};alert(\" Your user Id is  :\"+formData.id);axios.post('http://localhost:3000/users',formData).then(function(response){_this.setState({loading:false});_this.props.history.push('/');}).catch(function(error){_this.setState({loading:false});});};_this.inputChangedHandler=function(event,inputIdentifier){var updatedUserForm=_objectSpread({},_this.state.userForm);var updatedFormElement=_objectSpread({},updatedUserForm[inputIdentifier]);updatedFormElement.value=event.target.value;updatedFormElement.valid=_this.checkValidity(updatedFormElement.value,updatedFormElement.validation);updatedFormElement.touched=true;updatedUserForm[inputIdentifier]=updatedFormElement;var formIsValid=true;for(var _inputIdentifier in updatedUserForm){formIsValid=updatedUserForm[_inputIdentifier].valid&&formIsValid;}_this.setState({userForm:updatedUserForm,formIsValid:formIsValid});};return _this;}_createClass(Registration,[{key:\"checkValidity\",value:function checkValidity(value,rules){var isValid=true;if(!rules){return true;}if(rules.required){isValid=value.trim()!==''&&isValid;}if(rules.minLength){isValid=value.length>=rules.minLength&&isValid;}if(rules.maxLength){isValid=value.length<=rules.maxLength&&isValid;}if(rules.isEmail){var pattern=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;isValid=pattern.test(value)&&isValid;}if(rules.validName){var _pattern=/^[a-zA-Z ]*$/;isValid=_pattern.test(value)&&isValid;}if(rules.isNumeric){var _pattern2=/^\\d+$/;isValid=_pattern2.test(value)&&isValid;}if(rules.ageCheck){console.log(\".............\"+value);}return isValid;}},{key:\"render\",value:function render(){var _this2=this;var formElementsArray=[];for(var key in this.state.userForm){formElementsArray.push({id:key,config:this.state.userForm[key]});}var form=/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.userHandler,children:[formElementsArray.map(function(formElement){return/*#__PURE__*/_jsx(Input,{elementType:formElement.config.elementType,elementConfig:formElement.config.elementConfig,value:formElement.config.value,invalid:!formElement.config.valid,shouldValidate:formElement.config.validation,touched:formElement.config.touched,changed:function changed(event){return _this2.inputChangedHandler(event,formElement.id);}},formElement.id);}),/*#__PURE__*/_jsx(Button,{btnType:\"Success\",disabled:!this.state.formIsValid,children:\"ORDER\"})]});if(this.state.loading){form=/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.Registration,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Enter your Personal Data\"}),form]});}}]);return Registration;}(Component);export default Registration;","map":{"version":3,"sources":["/Users/venith/Desktop/FF_Assignment/policymanagement/src/components/Registration/Registration.js"],"names":["React","Component","axios","Button","Spinner","styles","Input","Registration","state","userForm","name","elementType","elementConfig","type","placeholder","value","validation","required","validName","valid","touched","username","password","minLength","address","street","zipCode","maxLength","isNumeric","country","email","isEmail","gender","options","displayValue","maritalstatus","phonenumber","dateofbirth","label","ageCheck","registrationDate","idtype","idnumber","formIsValid","loading","userHandler","event","preventDefault","setState","formData","formElementIdentifier","console","log","Math","floor","random","id","user","userData","alert","post","then","response","props","history","push","catch","error","inputChangedHandler","inputIdentifier","updatedUserForm","updatedFormElement","target","checkValidity","rules","isValid","trim","length","pattern","test","formElementsArray","key","config","form","map","formElement"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport Button from '../../components/Button/Button';\nimport Spinner from '../../UI_Components/Spinner/Spinner';\nimport styles from './registration.module.css';\n//import axios from '../../../axios-orders';\nimport Input from '../../components/Input/Input';\n\nclass Registration extends Component {\n    \n    state = {\n        userForm: {\n            name: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'Your Name'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    validName:true\n                },\n                valid: false,\n                touched: false\n            },\n            username: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'Your User Name'\n                },\n                value: '',\n                validation: {\n                    required: true\n                },\n                valid: false,\n                touched: false\n            },\n            password: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'password',\n                    placeholder: 'Password'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    minLength: 6\n                    \n                },\n                valid: false,\n                touched: false\n            },\n            address: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'Address'\n                },\n                value: '',\n                validation: {\n                    required: true\n                },\n                valid: false,\n                touched: false\n            },\n            street: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'Street'\n                },\n                value: '',\n                validation: {\n                    required: true\n                },\n                valid: false,\n                touched: false\n            },\n            zipCode: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'ZIP Code'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    minLength: 6,\n                    maxLength: 6,\n                    isNumeric: true\n                },\n                valid: false,\n                touched: false\n            },\n            country: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'Country'\n                },\n                value: '',\n                validation: {\n                    required: true\n                },\n                valid: false,\n                touched: false\n            },\n            email: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'email',\n                    placeholder: 'Your E-Mail'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    isEmail: true\n                },\n                valid: false,\n                touched: false\n            },\n            gender: {\n                elementType: 'select',\n                elementConfig: {\n                    options: [\n                        {value: '', displayValue: 'Please select gender'},\n                        {value: 'male', displayValue: 'male'},\n                        {value: 'female', displayValue: 'female'}\n                    ]\n                },\n                value: '',\n                validation: {required: true},\n                valid: true\n            },\n            maritalstatus: {\n                elementType: 'select',\n                elementConfig: {\n                    options: [\n                        {value: '', displayValue: 'Please select  marital status'},\n                        {value: 'married', displayValue: 'married'},\n                        {value: 'divorced', displayValue: 'divorced'},\n                        {value: 'single', displayValue: 'single'}\n                    ]\n                },\n                value: '',\n                validation: {required: true},\n                valid: true\n            },\n            phonenumber: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'phonenumber'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    minLength: 10,\n                    maxLength: 10,\n                },\n                valid: false,\n                touched: false\n            },\n            dateofbirth: {\n                elementType: 'input',\n                elementConfig: {\n                    label : 'DOB',\n                    type: 'date',\n                    placeholder: 'phonenumber'\n                },\n                value: '',\n                validation: {\n                    required :true,\n                    ageCheck:true\n                },\n                valid: false,\n                touched: false\n            },\n            registrationDate: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'date',\n                    placeholder: 'registration date'\n                },\n                value: '',\n                validation: {\n                    required :true\n                },\n                valid: false,\n                touched: false\n            },\n            idtype: {\n                elementType: 'select',\n                elementConfig: {\n                    options: [\n                        {value: '', displayValue: 'Please select  ID  Type'},\n                        {value: 'passport', displayValue: 'passport'},\n                        {value: 'driving', displayValue: 'driving license'},\n                        {value: 'ID card', displayValue: 'ID card'}\n                    ]\n                },\n                value: '',\n                validation: {required: true},\n                valid: true\n            },\n            idnumber: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'ID Number'\n                },\n                value: '',\n                validation: {\n                    required: true\n                },\n                valid: false,\n                touched: false\n            },\n        },\n        formIsValid: false,\n        loading: false\n    }\n\n    userHandler = ( event ) => {\n        event.preventDefault();\n        this.setState( { loading: true } );\n        const formData = {};\n        for (let formElementIdentifier in this.state.userForm) {\n            console.log(formElementIdentifier);\n            formData[formElementIdentifier] = this.state.userForm[formElementIdentifier].value;\n        }\n        formData[\"id\"] ='R-'+Math.floor(Math.random()*(999-100+1)+100);\n        console.log(\" the generated user id\"+ formData.id)\n\n        const user = {\n           \n            userData: formData\n        }\n        alert(\" Your user Id is  :\"+formData.id);\n       \n       \n        axios.post( 'http://localhost:3000/users', formData )\n          .then( response => {\n              this.setState( { loading: false } );\n             this.props.history.push( '/' );\n           } )\n          .catch( error => {\n               this.setState( { loading: false } );\n          } );\n    }\n\n    checkValidity(value, rules) {\n        let isValid = true;\n        if (!rules) {\n            return true;\n        }\n        \n        if (rules.required) {\n            isValid = value.trim() !== '' && isValid;\n        }\n\n        if (rules.minLength) {\n            isValid = value.length >= rules.minLength && isValid\n        }\n\n        if (rules.maxLength) {\n            isValid = value.length <= rules.maxLength && isValid\n        }\n\n        if (rules.isEmail) {\n            const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n            isValid = pattern.test(value) && isValid\n        }\n        if(rules.validName){\n            const pattern = /^[a-zA-Z ]*$/;\n            isValid = pattern.test(value) && isValid\n        }\n\n        if (rules.isNumeric) {\n            const pattern = /^\\d+$/;\n            isValid = pattern.test(value) && isValid\n        }\n        if(rules.ageCheck){\n            console.log(\".............\"+value);\n\n        }\n        return isValid;\n    }\n\n    inputChangedHandler = (event, inputIdentifier) => {\n        const updatedUserForm = {\n            ...this.state.userForm\n        };\n        const updatedFormElement = { \n            ...updatedUserForm[inputIdentifier]\n        };\n        updatedFormElement.value = event.target.value;\n        updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);\n        updatedFormElement.touched = true;\n        updatedUserForm[inputIdentifier] = updatedFormElement;\n        \n        let formIsValid = true;\n        for (let inputIdentifier in updatedUserForm) {\n            formIsValid = updatedUserForm[inputIdentifier].valid && formIsValid;\n        }\n        this.setState({userForm: updatedUserForm, formIsValid: formIsValid});\n    }\n\n    render () {\n        const formElementsArray = [];\n        for (let key in this.state.userForm) {\n            formElementsArray.push({\n                id: key,\n                config: this.state.userForm[key]\n            });\n        }\n        let form = (\n            <form onSubmit={this.userHandler}>\n                {formElementsArray.map(formElement => (\n                    <Input \n                        key={formElement.id}\n                        elementType={formElement.config.elementType}\n                        elementConfig={formElement.config.elementConfig}\n                        value={formElement.config.value}\n                        invalid={!formElement.config.valid}\n                        shouldValidate={formElement.config.validation}\n                        touched={formElement.config.touched}\n                        changed={(event) => this.inputChangedHandler(event, formElement.id)} />\n                ))}\n                <Button btnType=\"Success\" disabled={!this.state.formIsValid}>ORDER</Button>\n            </form>\n        );\n        if ( this.state.loading ) {\n            form = <Spinner />;\n        }\n        return (\n            <div className={styles.Registration}>\n                <h4>Enter your Personal Data</h4>\n                {form}\n            </div>\n        );\n    }\n}\n\nexport default Registration;"]},"metadata":{},"sourceType":"module"}