{"ast":null,"code":"import _defineProperty from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/venith/Desktop/FF_Assignment/policymanagement/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Input from'../Input/Input';import Button from'../Button/Button';import styles from'./login.module.css';import*as actionTypes from'../../store/action';import axios from'axios';import{connect}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={controls:{username:{elementType:'input',elementConfig:{type:'text',placeholder:'User Name'},value:'',validation:{required:true,isEmail:true},valid:false,touched:false},password:{elementType:'input',elementConfig:{type:'password',placeholder:'Password'},value:'',validation:{required:true,minLength:6},valid:false,touched:false}},isSignup:true};_this.inputChangedHandler=function(event,controlName){var updatedControls=_objectSpread(_objectSpread({},_this.state.controls),{},_defineProperty({},controlName,_objectSpread(_objectSpread({},_this.state.controls[controlName]),{},{value:event.target.value,valid:_this.checkValidity(event.target.value,_this.state.controls[controlName].validation),touched:true})));_this.setState({controls:updatedControls});};_this.submitHandler=function(event){event.preventDefault();var formData={};for(var formElementIdentifier in _this.state.controls){console.log(formElementIdentifier);formData[formElementIdentifier]=_this.state.controls[formElementIdentifier].value;}axios.get('http://localhost:3000/users').then(function(resp){var data=resp.data;data.forEach(function(e){if(e.username===formData.username&&e.password===formData.password){var _formData={};_formData[\"name\"]=e.name;_formData[\"address\"]=e.address;_formData[\"street\"]=e.street;_formData[\"zipCode\"]=e.zipCode;_formData[\"country\"]=e.country;_formData[\"email\"]=e.email;_formData[\"married\"]=e.married;_formData[\"phonenumber\"]=e.phonenumber;_formData[\"registrationDate\"]=e.registrationDate;_formData[\"idtype\"]=e.idtype;_formData[\"idnumber\"]=e.idnumber;_formData[\"id\"]=e.id;_formData[\"username\"]=e.username;_formData[\"password\"]=e.password;console.log(\"Logged in successfully\");console.log(\";;;;;;;user data\"+_formData);console.log(\".......\"+_formData.address);_this.props.onLoginAction(e.username,_formData);_this.props.history.push('/Home');}});}).catch(function(error){console.log(error);});};_this.registerHandler=function(event){event.preventDefault();_this.props.history.push('/Registration');};return _this;}_createClass(Login,[{key:\"checkValidity\",value:function checkValidity(value,rules){var isValid=true;if(!rules){return true;}if(rules.required){isValid=value.trim()!==''&&isValid;}return isValid;}},{key:\"render\",value:function render(){var _this2=this;var formElementsArray=[];for(var key in this.state.controls){formElementsArray.push({id:key,config:this.state.controls[key]});}var form=formElementsArray.map(function(formElement){return/*#__PURE__*/_jsx(Input,{elementType:formElement.config.elementType,elementConfig:formElement.config.elementConfig,value:formElement.config.value,invalid:!formElement.config.valid,shouldValidate:formElement.config.validation,touched:formElement.config.touched,changed:function changed(event){return _this2.inputChangedHandler(event,formElement.id);}},formElement.id);});return/*#__PURE__*/_jsxs(\"div\",{className:styles.Login,children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.submitHandler,children:[form,/*#__PURE__*/_jsx(Button,{btnType:\"Success\",children:\"LOGIN\"})]}),\"Not Registerd yet? Register Here...\",/*#__PURE__*/_jsx(\"form\",{onSubmit:this.registerHandler,children:/*#__PURE__*/_jsx(Button,{btnType:\"Success\",children:\"REGISTER\"})})]});}}]);return Login;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onLoginAction:function onLoginAction(name,formData){return dispatch({type:actionTypes.LOGIN_ACTION,userName:name,formData:formData});}};};export default connect(null,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/venith/Desktop/FF_Assignment/policymanagement/src/components/Login/Login.js"],"names":["React","Component","Input","Button","styles","actionTypes","axios","connect","Login","state","controls","username","elementType","elementConfig","type","placeholder","value","validation","required","isEmail","valid","touched","password","minLength","isSignup","inputChangedHandler","event","controlName","updatedControls","target","checkValidity","setState","submitHandler","preventDefault","formData","formElementIdentifier","console","log","get","then","resp","data","forEach","e","name","address","street","zipCode","country","email","married","phonenumber","registrationDate","idtype","idnumber","id","props","onLoginAction","history","push","catch","error","registerHandler","rules","isValid","trim","formElementsArray","key","config","form","map","formElement","mapDispatchToProps","dispatch","LOGIN_ACTION","userName"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport Input from '../Input/Input';\nimport Button from '../Button/Button';\nimport styles from  './login.module.css';\nimport * as actionTypes from '../../store/action';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\n\nclass Login extends Component {\n    state = {\n        controls: {\n            username: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'text',\n                    placeholder: 'User Name'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    isEmail: true\n                },\n                valid: false,\n                touched: false\n            },\n            password: {\n                elementType: 'input',\n                elementConfig: {\n                    type: 'password',\n                    placeholder: 'Password'\n                },\n                value: '',\n                validation: {\n                    required: true,\n                    minLength: 6\n                },\n                valid: false,\n                touched: false\n            }\n        },\n        isSignup: true\n    }\n    checkValidity ( value, rules ) {\n        let isValid = true;\n        if ( !rules ) {\n            return true;\n        }\n\n        if ( rules.required ) {\n            isValid = value.trim() !== '' && isValid;\n        }\n\n        return isValid;\n    }\n\n    inputChangedHandler = ( event, controlName ) => {\n        const updatedControls = {\n            ...this.state.controls,\n            [controlName]: {\n                ...this.state.controls[controlName],\n                value: event.target.value,\n                valid: this.checkValidity( event.target.value, this.state.controls[controlName].validation ),\n                touched: true\n            }\n        };\n        this.setState( { controls: updatedControls } );\n    }\n\n    submitHandler = ( event ) => {\n        event.preventDefault();\n        const formData = {};\n        for (let formElementIdentifier in this.state.controls) {\n            console.log(formElementIdentifier);\n            formData[formElementIdentifier] = this.state.controls[formElementIdentifier].value;\n        }\n        axios.get('http://localhost:3000/users')\n    .then(resp => {\n        let data = resp.data;\n        data.forEach(e => {\n            if((e.username===formData.username) &&(e.password===formData.password)){\n                const formData = {};\n                formData[\"name\"] =e.name;\n                formData[\"address\"] =e.address;\n                formData[\"street\"] =e.street;\n                formData[\"zipCode\"] =e.zipCode;\n                formData[\"country\"] =e.country;\n                formData[\"email\"] =e.email;\n                formData[\"married\"] =e.married;\n                formData[\"phonenumber\"] =e.phonenumber;\n                formData[\"registrationDate\"] =e.registrationDate;\n                formData[\"idtype\"] =e.idtype;\n                formData[\"idnumber\"] =e.idnumber;\n                formData[\"id\"] =e.id;\n                formData[\"username\"] =e.username;\n                formData[\"password\"] =e.password;\n            \n\n                console.log(\"Logged in successfully\");\n                console.log(\";;;;;;;user data\" +formData);\n                console.log(\".......\"+formData.address)\n                this.props.onLoginAction(e.username,formData);\n                this.props.history.push( '/Home' );\n            }\n        });\n    })\n    .catch(error => {\n        console.log(error);\n    }); \n       \n        \n    }\n\n    registerHandler = ( event ) => {\n        event.preventDefault();\n        this.props.history.push( '/Registration' );\n        \n    }\n   \n\n    render () {\n        const formElementsArray = [];\n        for ( let key in this.state.controls ) {\n            formElementsArray.push( {\n                id: key,\n                config: this.state.controls[key]\n            } );\n        }\n\n        let form = formElementsArray.map( formElement => (\n            <Input\n                key={formElement.id}\n                elementType={formElement.config.elementType}\n                elementConfig={formElement.config.elementConfig}\n                value={formElement.config.value}\n                invalid={!formElement.config.valid}\n                shouldValidate={formElement.config.validation}\n                touched={formElement.config.touched}\n                changed={( event ) => this.inputChangedHandler( event, formElement.id )} />\n        ) );\n\n      \n\n        return (\n            <div className={styles.Login}>\n               \n                <form onSubmit={this.submitHandler}>\n                    {form}\n                    <Button btnType=\"Success\" >LOGIN</Button>\n                </form>\n                Not Registerd yet? Register Here...\n                <form onSubmit={this.registerHandler}>\n                    \n                    <Button btnType=\"Success\">REGISTER</Button>\n                </form>\n            </div>\n        );\n    }\n}\n\n\n\nconst mapDispatchToProps = dispatch =>{\n\n        return{\n            onLoginAction : (name,formData) => dispatch({type:actionTypes.LOGIN_ACTION,userName:name,formData:formData})\n        }\n};\n\n\nexport default connect(null, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}